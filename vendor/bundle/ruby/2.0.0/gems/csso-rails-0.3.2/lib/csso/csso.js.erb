<%
# template for single-file csso lib

def file(filename)
  File.read(filename).strip
end

%>/*
<%= " THIS FILE IS AUTOGENERATED! DO NOT EDIT!\n See #{__FILE__} instead." %>

 Based on <%= file 'csso/VERSION' %> revision <%= file 'csso/.git/refs/heads/master' %>
*/

console = {
  log: function(){},
  error: function(txt){
    throw txt;
  }
};

<%= file 'csso/web/csso.web.js' %>

do_compression = function(css, disable_structural){
  var compressor = new CSSOCompressor(), translator = new CSSOTranslator();
  return translator.translate(
    cleanInfo(
      compressor.compress(
        srcToCSSP(css, 'stylesheet', true),
        disable_structural
      )
    )
  );
};
